<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://res.cloudinary.com/dg3ptqwdm/raw/upload/v1506804287/payexpresse.min.css">
    <script src="../web-sdk/payexpresse.js"></script>
</head>
<body>

    <button class="buy" onclick="buy(this)" data-item-id="88" >Acheter iphone (450000 XOF)</button>

<script>


    function buy(btn) {
        var selector = pQuery(btn);

        (new PayExpresse({
            item_id          :   selector.attr('data-item-id'),
        })).withOption({
            requestTokenUrl           :   'http://localhost:8888/payexpress-sdk/test/paiement.php',
            method              :   'POST',
            prensentationMode   :   PayExpresse.OPEN_IN_NEW_TAB,
            willGetToken        :   function () {
                console.log("Je me prepare a obtenir un token");
                selector.prop('disabled', true);
            },
            didGetToken         : function (token, redirectUrl) {
                console.log(arguments)
                console.log("Mon token est : " +  token  + ' et url est ' + redirectUrl );
                selector.prop('disabled', false);
            },
            didReceiveError: function (error) {
                console.log(error)
            }
        }).send();
    }
</script>
</body>
</html>